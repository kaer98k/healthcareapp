import React, { useState, useEffect, useRef } from 'react';

interface Challenge {
  id: string;
  title: string;
  description: string;
  type: 'personal' | 'community' | 'team';
  target: number;
  current: number;
  unit: string;
  startDate: Date;
  endDate: Date;
  participants: number;
  isCompleted: boolean;
  badge?: string;
  category: 'steps' | 'calories' | 'exercise' | 'streak';
}

interface DailyStats {
  date: string;
  steps: number;
  calories: number;
  exerciseMinutes: number;
  streak: number;
}

interface Team {
  id: string;
  name: string;
  members: string[];
  totalSteps: number;
  totalCalories: number;
  rank: number;
}

interface Match {
  id: string;
  teamAId: string;
  teamBId: string;
  startDate: Date;
  endDate: Date;
  status: 'upcoming' | 'ongoing' | 'finished';
}

const WorkoutRecommendations: React.FC = () => {
  const [selectedTab, setSelectedTab] = useState<'daily' | 'personal' | 'ranking' | 'fun' | 'team'>('daily');
  const [dailyStats, setDailyStats] = useState<DailyStats>({
    date: new Date().toISOString().split('T')[0],
    steps: 0,
    calories: 0,
    exerciseMinutes: 0,
    streak: 0
  });
  // ì›”(0)~ì¼(6) ê¸°ì¤€ì˜ ì£¼ê°„ ê±¸ìŒ ìˆ˜ ë°ì´í„°. ê¸°ë³¸ ìƒ˜í”Œ ê°’ì„ ì œê³µí•˜ê³ , ì˜¤ëŠ˜ ê°’ì€ dailyStatsì— ë§ì¶° ë™ê¸°í™”í•œë‹¤.
  const [weeklySteps, setWeeklySteps] = useState<number[]>([8220, 7794, 5800, 8194, 7099, 7725, 9005]);
  const [showCalendar, setShowCalendar] = useState(false);
  
  // ì›”ë³„ ë°ì´í„° ì¶”ê°€
  const [monthlySteps, setMonthlySteps] = useState<number[]>([
    8500, 9200, 7800, 8900, 7600, 8100, 9500, 8800, 8200, 7900, 8700, 9100,
    8400, 9300, 7700, 8600, 7500, 8000, 9400, 8700, 8100, 7800, 8600, 9000,
    8300, 9200, 7600, 8500, 7400, 7900
  ]);
  const [graphView, setGraphView] = useState<'daily' | 'weekly' | 'monthly'>('weekly');

  // ì›”(0)~ì¼(6) ì¸ë±ìŠ¤ ê³„ì‚°: JSëŠ” ì¼(0)~í† (6)ì´ë¯€ë¡œ ì›” ê¸°ì¤€ìœ¼ë¡œ ë§ì¶˜ë‹¤.
  const jsDayIndex = new Date().getDay(); // 0: ì¼
  const mondayBasedTodayIndex = (jsDayIndex + 6) % 7; // ì›”=0, ..., ì¼=6

  useEffect(() => {
    setWeeklySteps(prev => {
      const next = [...prev];
      next[mondayBasedTodayIndex] = dailyStats.steps;
      return next;
    });
  }, [dailyStats.steps, mondayBasedTodayIndex]);

  // Canvas ìš”ì†Œë¥¼ ìœ„í•œ ref ì¶”ê°€
  const chartCanvasRef = useRef<HTMLCanvasElement>(null);
  
  // Chart.js ê·¸ë˜í”„ ì´ˆê¸°í™” - ëª¨ë‹¬ì´ ì—´ë¦° í›„ì— ì‹¤í–‰
  useEffect(() => {
    // ëª¨ë‹¬ì´ ì—´ë ¤ìˆì„ ë•Œë§Œ ì°¨íŠ¸ ì´ˆê¸°í™”
    if (!showCalendar) return;
    
    // Chart.jsê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
    const initChart = () => {
      console.log('Chart.js ì´ˆê¸°í™” ì‹œì‘');
      console.log('window.Chart ì¡´ì¬ ì—¬ë¶€:', typeof window !== 'undefined' && (window as any).Chart);
      console.log('ëª¨ë‹¬ ìƒíƒœ:', showCalendar);
      
      if (typeof window !== 'undefined' && (window as any).Chart) {
        // useRefë¥¼ í†µí•´ Canvas ìš”ì†Œ ì°¸ì¡°
        const ctx = chartCanvasRef.current;
        console.log('Canvas ìš”ì†Œ (useRef):', ctx);
        
        if (ctx) {
          // ê¸°ì¡´ ì°¨íŠ¸ê°€ ìˆë‹¤ë©´ ì œê±°
          const existingChart = (window as any).Chart.getChart(ctx);
          if (existingChart) {
            console.log('ê¸°ì¡´ ì°¨íŠ¸ ì œê±°');
            existingChart.destroy();
          }

          // ë‚ ì§œ ë¼ë²¨ ìƒì„±
          const dateLabels = weeklySteps.map((steps, index) => {
            const today = new Date();
            const dayOffset = index - mondayBasedTodayIndex;
            const date = new Date(today);
            date.setDate(today.getDate() + dayOffset);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            return `${month}/${day}`;
          });
          
          console.log('ë‚ ì§œ ë¼ë²¨:', dateLabels);
          console.log('ê±¸ìŒìˆ˜ ë°ì´í„°:', weeklySteps);

          // ê·¸ë˜ë””ì–¸íŠ¸ ìƒì„±
          const gradient = ctx.getContext('2d')?.createLinearGradient(0, 0, 0, 200);
          if (gradient) {
            gradient.addColorStop(0, 'rgba(249, 115, 22, 0.4)'); // ì—°í•œ ì£¼í™©ìƒ‰
            gradient.addColorStop(1, 'rgba(249, 115, 22, 0)'); // íˆ¬ëª…
          }

          try {
            const chart = new (window as any).Chart(ctx, {
              type: 'line',
              data: {
                labels: dateLabels,
                datasets: [{
                  label: 'ê±¸ìŒìˆ˜',
                  data: weeklySteps,
                  borderColor: 'rgba(249, 115, 22, 1)', // ì£¼í™©ìƒ‰ ì„ 
                  backgroundColor: gradient,
                  fill: true,
                  tension: 0.4, // ë¶€ë“œëŸ¬ìš´ ê³¡ì„ 
                  pointRadius: 4, // ë°ì´í„° í¬ì¸íŠ¸ í¬ê¸°
                  pointBackgroundColor: 'rgba(249, 115, 22, 1)', // í¬ì¸íŠ¸ ë°°ê²½ìƒ‰
                  pointBorderColor: 'white', // í¬ì¸íŠ¸ í…Œë‘ë¦¬ìƒ‰
                  pointBorderWidth: 2, // í¬ì¸íŠ¸ í…Œë‘ë¦¬ ë‘ê»˜
                  pointHoverRadius: 6, // í˜¸ë²„ ì‹œ í¬ì¸íŠ¸ í¬ê¸°
                  pointHoverBackgroundColor: 'rgba(249, 115, 22, 1)',
                  pointHoverBorderColor: 'white',
                  pointHoverBorderWidth: 3,
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                  legend: {
                    display: false // ë²”ë¡€ ìˆ¨ê¹€
                  },
                  tooltip: {
                    mode: 'index',
                    intersect: false,
                    backgroundColor: 'rgba(255, 255, 255, 0.98)',
                    titleColor: '#1f2937',
                    bodyColor: '#1f2937',
                    borderColor: 'rgba(249, 115, 22, 0.2)',
                    borderWidth: 1,
                    cornerRadius: 25,
                    padding: 16,
                    displayColors: false,
                    titleFont: {
                      size: 14,
                      weight: 'bold'
                    },
                    bodyFont: {
                      size: 16,
                      weight: '600'
                    },
                    callbacks: {
                      title: function(context: any) {
                        return context[0].label;
                      },
                      label: function(context: any) {
                        return `${context.parsed.y.toLocaleString()}ë³´`;
                      }
                    }
                  }
                },
                scales: {
                  x: {
                    grid: {
                      display: false // Xì¶• ê·¸ë¦¬ë“œ ìˆ¨ê¹€
                    },
                    ticks: {
                      color: '#6b7280', // Xì¶• ë¼ë²¨ ìƒ‰ìƒ
                      font: {
                        size: 12
                      }
                    },
                    border: {
                      display: false // Xì¶• ì„  ìˆ¨ê¹€
                    }
                  },
                  y: {
                    grid: {
                      display: false // Yì¶• ê·¸ë¦¬ë“œ ìˆ¨ê¹€
                    },
                    ticks: {
                      display: false // Yì¶• ë¼ë²¨ ìˆ¨ê¹€
                    },
                    border: {
                      display: false // Yì¶• ì„  ìˆ¨ê¹€
                    }
                  }
                },
                interaction: {
                  intersect: false,
                  mode: 'index'
                }
              }
            });
            
            console.log('ì°¨íŠ¸ ìƒì„± ì„±ê³µ:', chart);
          } catch (error) {
            console.error('ì°¨íŠ¸ ìƒì„± ì˜¤ë¥˜:', error);
          }
        } else {
          console.error('Canvas ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (useRef)');
        }
      } else {
        console.error('Chart.jsê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
      }
    };

    // ëª¨ë‹¬ì´ ì—´ë¦° í›„ ì•½ê°„ì˜ ì§€ì—°ì„ ë‘ê³  ì°¨íŠ¸ ì´ˆê¸°í™”
    const timer = setTimeout(initChart, 500);
    
    return () => clearTimeout(timer);
  }, [showCalendar, weeklySteps, mondayBasedTodayIndex]);

  // showCalendar ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì°¨íŠ¸ ê°•ì œ ì¬ì´ˆê¸°í™”
  useEffect(() => {
    if (showCalendar) {
      // ëª¨ë‹¬ì´ ì—´ë¦° í›„ ì°¨íŠ¸ê°€ ì œëŒ€ë¡œ í‘œì‹œë˜ë„ë¡ ê°•ì œ ë¦¬ë Œë”ë§
      const timer = setTimeout(() => {
        const event = new Event('resize');
        window.dispatchEvent(event);
      }, 600);
      
      return () => clearTimeout(timer);
    }
  }, [showCalendar]);


  const [communityChallenges, setCommunityChallenges] = useState<Challenge[]>([
    {
      id: '4',
      title: 'ì „ì²´ ì‚¬ìš©ì ì£¼ê°„ ê±¸ìŒ ìˆ˜ ëŒ€ê²°',
      description: 'ì´ë²ˆ ì£¼ ê°€ì¥ ë§ì´ ê±¸ì€ ì‚¬ëŒì€ ëˆ„êµ¬ì¼ê¹Œìš”?',
      type: 'community',
      target: 100000,
      current: 0,
      unit: 'ë³´',
      startDate: new Date(),
      endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
      participants: 156,
      isCompleted: false,
      category: 'steps'
    }
  ]);
  const [teams, setTeams] = useState<Team[]>([
    {
      id: '1',
      name: 'ğŸ”¥ ë¶ˆê½ƒíŒ€',
      members: ['ê¹€ì² ìˆ˜', 'ë°•ì˜í¬', 'ì´ë¯¼ìˆ˜'],
      totalSteps: 125000,
      totalCalories: 3200,
      rank: 1
    },
    {
      id: '2',
      name: 'ğŸ’ª ê°•ì² íŒ€',
      members: ['ì •ìˆ˜ì§„', 'ìµœì§€ì˜', 'í•œë™í›ˆ'],
      totalSteps: 118000,
      totalCalories: 2950,
      rank: 2
    }
  ]);

  // íŒ€ ë§Œë“¤ê¸° ëª¨ë‹¬ ìƒíƒœ
  const [showCreateTeam, setShowCreateTeam] = useState(false);
  const [newTeamName, setNewTeamName] = useState('');
  const [newMemberInput, setNewMemberInput] = useState('');
  const [newTeamMembers, setNewTeamMembers] = useState<string[]>([]);
  const maxMembers = 10;

  const handleAddMember = () => {
    const trimmed = newMemberInput.trim();
    if (!trimmed) return;
    if (newTeamMembers.length >= maxMembers) return;
    setNewTeamMembers(prev => [...prev, trimmed]);
    setNewMemberInput('');
  };

  const handleRemoveMember = (name: string) => {
    setNewTeamMembers(prev => prev.filter(m => m !== name));
  };

  const handleCreateTeam = () => {
    if (!newTeamName.trim()) return;
    const team: Team = {
      id: Date.now().toString(),
      name: newTeamName.trim(),
      members: newTeamMembers.slice(0, maxMembers),
      totalSteps: 0,
      totalCalories: 0,
      rank: teams.length + 1
    };
    setTeams(prev => [...prev, team]);
    setShowCreateTeam(false);
    setNewTeamName('');
    setNewTeamMembers([]);
    setNewMemberInput('');
  };

  // ëŒ€ê²°(ë§¤ì¹˜) ìƒíƒœ
  const [matches, setMatches] = useState<Match[]>([]);
  const [showCreateMatch, setShowCreateMatch] = useState(false);
  const [selectedTeamAId, setSelectedTeamAId] = useState('');
  const [selectedTeamBId, setSelectedTeamBId] = useState('');
  const [matchStartDate, setMatchStartDate] = useState<string>('');
  const [matchEndDate, setMatchEndDate] = useState<string>('');

  const handleCreateMatch = () => {
    if (!selectedTeamAId || !selectedTeamBId || selectedTeamAId === selectedTeamBId) return;
    const teamA = teams.find(t => t.id === selectedTeamAId);
    const teamB = teams.find(t => t.id === selectedTeamBId);
    if (!teamA || !teamB) return;
    // ì¸ì› ì œí•œ í™•ì¸(ìµœëŒ€ 10ëª… vs 10ëª…)
    if (teamA.members.length > maxMembers || teamB.members.length > maxMembers) return;
    const start = matchStartDate ? new Date(matchStartDate) : new Date();
    const end = matchEndDate ? new Date(matchEndDate) : new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);
    const now = new Date();
    const status: Match['status'] = now < start ? 'upcoming' : now > end ? 'finished' : 'ongoing';
    const match: Match = {
      id: Date.now().toString(),
      teamAId: teamA.id,
      teamBId: teamB.id,
      startDate: start,
      endDate: end,
      status
    };
    setMatches(prev => [match, ...prev]);
    setShowCreateMatch(false);
    setSelectedTeamAId('');
    setSelectedTeamBId('');
    setMatchStartDate('');
    setMatchEndDate('');
  };

  // ê±¸ìŒ ìˆ˜ ì…ë ¥ ì²˜ë¦¬
  const handleStepsInput = (steps: number) => {
    setDailyStats(prev => ({
      ...prev,
      steps: Math.max(0, steps),
      calories: Math.round(steps * 0.04) // ëŒ€ëµì ì¸ ì¹¼ë¡œë¦¬ ê³„ì‚°
    }));
  };



  return (
    <>
      <div className="max-w-6xl mx-auto p-6">
        {/* í—¤ë” */}
        <div className="text-center mb-12 relative">
          {/* ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ íš¨ê³¼ */}
          <div className="absolute inset-0 bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 opacity-10 rounded-3xl blur-3xl transform scale-150"></div>
          
          {/* ë©”ì¸ ì œëª© */}
          <div className="relative">
            <div className="inline-flex items-center space-x-4 mb-4">
              <div className="text-6xl animate-bounce">ğŸ†</div>
              <h1 className="text-6xl font-black bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent">
                ì±Œë¦°ì§€
              </h1>
              <div className="text-6xl animate-pulse">ğŸ”¥</div>
            </div>
            
            {/* ì„œë¸Œíƒ€ì´í‹€ */}
            <div className="space-y-2">
              <p className="text-2xl font-bold text-text-primary">ë§¤ì¼ì˜ ì°¸ì—¬ë¡œ ê±´ê°•í•œ ìŠµê´€ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>
              <p className="text-lg text-text-secondary">ì—´ì •ì„ ë¶ˆíƒœìš°ê³  ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì„¸ìš”! ğŸ’ª</p>
            </div>
            
            {/* ë™ê¸°ë¶€ì—¬ ë°°ì§€ë“¤ */}
            <div className="flex justify-center space-x-4 mt-6">
              <div className="bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-2 rounded-full text-sm font-bold animate-pulse">
                ğŸš€ ë„ì „í•˜ì„¸ìš”!
              </div>
              <div className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-full text-sm font-bold animate-pulse" style={{animationDelay: '0.5s'}}>
                ğŸ’ª í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”!
            </div>
              <div className="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-4 py-2 rounded-full text-sm font-bold animate-pulse" style={{animationDelay: '1s'}}>
                ğŸ¯ ëª©í‘œë¥¼ í–¥í•´!
              </div>
            </div>
          </div>
        </div>

        {/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}
        <div className="flex justify-center mb-12">
          <div className="relative bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-2xl p-2 shadow-xl border border-gray-200 dark:border-gray-700">
            <div className="flex space-x-1">
              {[
                { 
                  id: 'daily', 
                  label: 'ì¼ì¼ í˜„í™©', 
                  icon: 'ğŸ“Š',
                  description: 'ì˜¤ëŠ˜ì˜ í™œë™ í˜„í™©',
                  color: 'from-blue-500 to-cyan-500'
                },

                { 
                  id: 'ranking', 
                  label: 'ë­í‚¹', 
                  icon: 'ğŸ†',
                  description: 'ê±¸ìŒìˆ˜ ìˆœìœ„',
                  color: 'from-purple-500 to-pink-500'
                },
                { 
                  id: 'fun', 
                  label: 'ì‹ ë°• ì±Œë¦°ì§€', 
                  icon: 'ğŸª',
                  description: 'ì—‰ëš±í•œ ë„ì „',
                  color: 'from-yellow-500 to-orange-500'
                },
                { 
                  id: 'team', 
                  label: 'íŒ€ ëŒ€ê²°', 
                  icon: 'ğŸ‘¥',
                  description: 'íŒ€ì›Œí¬ë¡œ ìŠ¹ë¦¬',
                  color: 'from-red-500 to-pink-500'
                }
              ].map((tab) => (
                <button
                  key={tab.id}
                  onClick={() => setSelectedTab(tab.id as any)}
                  className={`relative group transition-all duration-300 ease-out ${
                    selectedTab === tab.id
                      ? 'transform scale-105'
                      : 'hover:scale-102'
                  }`}
                >
                  {/* ì„ íƒëœ íƒ­ ë°°ê²½ */}
                  {selectedTab === tab.id && (
                    <div className={`absolute inset-0 bg-gradient-to-r ${tab.color} rounded-xl shadow-lg transform transition-all duration-300`} />
                  )}
                  
                  {/* íƒ­ ë‚´ìš© */}
                  <div className={`relative px-6 py-4 rounded-xl transition-all duration-300 ${
                    selectedTab === tab.id
                      ? 'text-white'
                      : 'text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white'
                  }`}>
                    {/* ì•„ì´ì½˜ê³¼ ë¼ë²¨ */}
                    <div className="flex flex-col items-center space-y-2">
                      <div className={`text-3xl transition-all duration-300 ${
                        selectedTab === tab.id
                          ? 'transform scale-110'
                          : 'group-hover:scale-110'
                      }`}>
                        {tab.icon}
                      </div>
                      <div className="text-center">
                        <div className={`font-bold text-sm transition-all duration-300 ${
                          selectedTab === tab.id
                            ? 'text-white'
                            : 'text-gray-700 dark:text-gray-200'
                        }`}>
                          {tab.label}
                        </div>
                        <div className={`text-xs mt-1 transition-all duration-300 ${
                          selectedTab === tab.id
                            ? 'text-blue-100'
                            : 'text-gray-500 dark:text-gray-400'
                        }`}>
                          {tab.description}
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  {/* í˜¸ë²„ íš¨ê³¼ - ì„ íƒë˜ì§€ ì•Šì€ íƒ­ì—ë§Œ */}
                  {selectedTab !== tab.id && (
                    <div className="absolute inset-0 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 rounded-xl opacity-0 group-hover:opacity-100 transition-all duration-300" />
                  )}
                </button>
              ))}
            </div>
          </div>
        </div>

        {/* ì¼ì¼ í˜„í™© íƒ­ */}
        {selectedTab === 'daily' && (
          <div className="space-y-6">
            {/* ê±¸ìŒ ìˆ˜ ì…ë ¥ */}
            <div className="relative overflow-hidden">
              {/* ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ */}
              <div className="absolute inset-0 bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 rounded-3xl"></div>
              
              {/* íŒ¨í„´ ì˜¤ë²„ë ˆì´ */}
              <div className="absolute inset-0 bg-gradient-to-br from-white/5 to-white/10 rounded-3xl"></div>
              
              {/* ë©”ì¸ ì½˜í…ì¸  */}
              <div className="relative p-8 text-white">
                {/* í—¤ë” */}
                <div className="flex items-center justify-between mb-6">
                <div className="flex items-center space-x-3">
                    <div className="text-4xl animate-bounce">ğŸš¶â€â™€ï¸</div>
                  <div>
                      <h2 className="text-3xl font-black mb-1">ì˜¤ëŠ˜ì˜ ê±¸ìŒ ìˆ˜</h2>
                      <p className="text-blue-100 text-lg">ëª©í‘œë¥¼ í–¥í•´ í•œ ê±¸ìŒì”©! ğŸ’ª</p>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="text-2xl font-bold text-yellow-300">ëª©í‘œ: 10,000ë³´</div>
                    <div className="text-sm text-blue-100">í•˜ë£¨ ëª©í‘œ ë‹¬ì„±ê¹Œì§€!</div>
                  </div>
                </div>
                
                {/* ê±¸ìŒ ìˆ˜ ì…ë ¥ ì„¹ì…˜ */}
                <div className="bg-white bg-opacity-15 backdrop-blur-sm rounded-2xl p-6 mb-6 border border-white border-opacity-20">
                  <div className="flex items-center justify-center">
                    <div className="text-center">
                      <div className="text-6xl font-black text-yellow-300 mb-2 animate-pulse">
                        {dailyStats.steps.toLocaleString()}
                      </div>
                      <div className="text-2xl font-bold">ë³´</div>
                    </div>
                  </div>
                  
                  {/* ì§„í–‰ë¥  ë°” */}
                  <div className="mt-6">
                    <div className="flex justify-between text-sm mb-2">
                      <span>ì§„í–‰ë¥ </span>
                      <span>{Math.min(100, Math.round((dailyStats.steps / 10000) * 100))}%</span>
                    </div>
                    <div className="w-full bg-white bg-opacity-20 rounded-full h-4 overflow-hidden">
                      <div 
                        className="bg-gradient-to-r from-yellow-400 to-orange-500 h-full rounded-full transition-all duration-1000 ease-out"
                        style={{ width: `${Math.min(100, (dailyStats.steps / 10000) * 100)}%` }}
                      ></div>
                    </div>
                  </div>
                </div>
                
                {/* ì¹¼ë¡œë¦¬ ì •ë³´ */}
                <div className="bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-4 text-center">
                  <div className="text-2xl font-bold mb-1">ğŸ”¥ ì˜ˆìƒ ì†Œëª¨ ì¹¼ë¡œë¦¬</div>
                  <div className="text-4xl font-black">{dailyStats.calories} kcal</div>
                  <div className="text-sm text-orange-100">ì˜¤ëŠ˜ë„ ì—´ì‹¬íˆ ìš´ë™í•œ ë‹¹ì‹ ì„ ì‘ì›í•©ë‹ˆë‹¤! ğŸ‰</div>
                </div>
              </div>
            </div>



            {/* ì£¼ê°„ ê·¸ë˜í”„ */}
            <div className="relative overflow-hidden bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-3xl p-8 text-white">
              {/* ë°°ê²½ íŒ¨í„´ */}
              <div className="absolute inset-0 bg-gradient-to-br from-white/5 to-white/10 rounded-3xl"></div>
              
              <div className="relative">
                {/* í—¤ë” */}
                <div className="text-center mb-8">
                  <div className="flex items-center justify-center space-x-3 mb-2">
                    <div className="text-4xl animate-pulse">ğŸ“ˆ</div>
                    <h3 className="text-3xl font-black">ì´ë²ˆ ì£¼ ê±¸ìŒ ìˆ˜</h3>
                    <button
                      onClick={() => {
                        setShowCalendar(!showCalendar);
                        // ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ì°¨íŠ¸ ì´ˆê¸°í™”ë¥¼ ìœ„í•œ ê°•ì œ ë¦¬ë Œë”ë§
                        if (!showCalendar) {
                          setTimeout(() => {
                            const event = new Event('resize');
                            window.dispatchEvent(event);
                          }, 100);
                        }
                      }}
                      className="px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white text-xl font-bold rounded-lg transition-all duration-300 transform hover:scale-110 border-2 border-white border-opacity-30"
                    >
                      {showCalendar ? 'âœ•' : 'ğŸ“… ìƒì„¸ë³´ê¸°'}
                    </button>
                    <div className="text-4xl animate-bounce">ğŸš€</div>
                  </div>
                  <p className="text-xl text-purple-100">ê¾¸ì¤€í•¨ì´ ë§Œë“œëŠ” ê±´ê°•í•œ ìŠµê´€! ğŸ’ª</p>
                </div>
                
                {/* ê·¸ë˜í”„ ë·° ì„ íƒ */}
                <div className="flex justify-center mb-6">
                  <div className="bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-2 border border-white border-opacity-30">
                    <div className="flex space-x-2">
                      {[
                        { id: 'daily', label: 'ì¼ë³„', icon: 'ğŸ“Š' },
                        { id: 'weekly', label: 'ì£¼ë³„', icon: 'ğŸ“ˆ' },
                        { id: 'monthly', label: 'ì›”ë³„', icon: 'ğŸ“…' }
                      ].map((view) => (
                        <button
                          key={view.id}
                          onClick={() => setGraphView(view.id as 'daily' | 'weekly' | 'monthly')}
                          className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${
                            graphView === view.id
                              ? 'bg-white text-purple-600 shadow-lg'
                              : 'text-white hover:bg-white hover:bg-opacity-20'
                          }`}
                        >
                          <span className="mr-2">{view.icon}</span>
                          {view.label}
                        </button>
                      ))}
                    </div>
                  </div>
                </div>

                {/* ê·¸ë˜í”„ */}
                <div className="flex items-end justify-between h-40 space-x-3">
                  {graphView === 'daily' && (
                    // ì¼ë³„ ê·¸ë˜í”„ (ì£¼ê°„)
                    ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'].map((day, index) => {
                      const steps = weeklySteps[index] ?? 0;
                      const height = Math.min(100, (steps / 10000) * 100);
                      const isToday = index === mondayBasedTodayIndex;

                      return (
                        <div key={day} className="flex flex-col items-center">
                          {/* ê±¸ìŒ ìˆ˜ (í•­ìƒ í‘œì‹œ) */}
                          <div className="text-sm font-bold text-yellow-300 mb-2">
                            {steps.toLocaleString()}
                          </div>

                          {/* ê·¸ë˜í”„ ë°” */}
                          <div
                            className={`w-12 rounded-t-2xl transition-all duration-700 ease-out ${
                              isToday
                                ? 'bg-gradient-to-t from-yellow-400 to-orange-500 shadow-lg shadow-yellow-500/50'
                                : 'bg-gradient-to-t from-white to-white/80'
                            }`}
                            style={{ height: `${height}%` }}
                          />

                          {/* ìš”ì¼ */}
                          <div className={`text-sm font-bold mt-2 ${isToday ? 'text-yellow-300' : 'text-white'}`}>
                            {day}
                          </div>

                          {/* ì˜¤ëŠ˜ í‘œì‹œ */}
                          {isToday && (
                            <div className="mt-1 px-2 py-0.5 bg-yellow-400 text-black text-xs font-bold rounded-full">
                              ì˜¤ëŠ˜
                            </div>
                          )}
                        </div>
                      );
                    })
                  )}
                  
                  {graphView === 'weekly' && (
                    // ì£¼ë³„ ê·¸ë˜í”„ (ìµœê·¼ 4ì£¼)
                    ['1ì£¼ì°¨', '2ì£¼ì°¨', '3ì£¼ì°¨', '4ì£¼ì°¨'].map((week, index) => {
                      const weekSteps = [weeklySteps, [7500, 8200, 6800, 7900, 6500, 7200, 8500], [8000, 8700, 7200, 8100, 6800, 7500, 8800], [8500, 9200, 7800, 8900, 7600, 8100, 9500]][index];
                      const totalSteps = weekSteps.reduce((sum, steps) => sum + steps, 0);
                      const height = Math.min(100, (totalSteps / 70000) * 100);
                      const isCurrentWeek = index === 0;

                      return (
                        <div key={week} className="flex flex-col items-center">
                          {/* ê±¸ìŒ ìˆ˜ */}
                          <div className="text-sm font-bold text-yellow-300 mb-2">
                            {totalSteps.toLocaleString()}
                          </div>

                          {/* ê·¸ë˜í”„ ë°” */}
                          <div
                            className={`w-12 rounded-t-2xl transition-all duration-700 ease-out ${
                              isCurrentWeek
                                ? 'bg-gradient-to-t from-yellow-400 to-orange-500 shadow-lg shadow-yellow-500/50'
                                : 'bg-gradient-to-t from-white to-white/80'
                            }`}
                            style={{ height: `${height}%` }}
                          />

                          {/* ì£¼ì°¨ */}
                          <div className={`text-sm font-bold mt-2 ${isCurrentWeek ? 'text-yellow-300' : 'text-white'}`}>
                            {week}
                          </div>

                          {/* í˜„ì¬ ì£¼ í‘œì‹œ */}
                          {isCurrentWeek && (
                            <div className="mt-1 px-2 py-0.5 bg-yellow-400 text-black text-xs font-bold rounded-full">
                              í˜„ì¬
                            </div>
                          )}
                        </div>
                      );
                    })
                  )}
                  
                  {graphView === 'monthly' && (
                    // ì›”ë³„ ê·¸ë˜í”„ (ìµœê·¼ 6ê°œì›”)
                    ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”'].map((month, index) => {
                      const monthSteps = [280000, 265000, 290000, 275000, 300000, 285000][index];
                      const height = Math.min(100, (monthSteps / 350000) * 100);
                      const isCurrentMonth = index === 5;

                      return (
                        <div key={month} className="flex flex-col items-center">
                          {/* ê±¸ìŒ ìˆ˜ */}
                          <div className="text-sm font-bold text-yellow-300 mb-2">
                            {monthSteps.toLocaleString()}
                          </div>

                          {/* ê·¸ë˜í”„ ë°” */}
                          <div
                            className={`w-12 rounded-t-2xl transition-all duration-700 ease-out ${
                              isCurrentMonth
                                ? 'bg-gradient-to-t from-yellow-400 to-orange-500 shadow-lg shadow-yellow-500/50'
                                : 'bg-gradient-to-t from-white to-white/80'
                            }`}
                            style={{ height: `${height}%` }}
                          />

                          {/* ì›” */}
                          <div className={`text-sm font-bold mt-2 ${isCurrentMonth ? 'text-yellow-300' : 'text-white'}`}>
                            {month}
                          </div>

                          {/* í˜„ì¬ ì›” í‘œì‹œ */}
                          {isCurrentMonth && (
                            <div className="mt-1 px-2 py-0.5 bg-yellow-400 text-black text-xs font-bold rounded-full">
                              í˜„ì¬
                            </div>
                          )}
                        </div>
                      );
                    })
                  )}
                </div>

                {/* ê·¸ë˜í”„ ë·°ë³„ ì´ê³„ */}
                <div className="mt-8 text-center">
                  <div className="bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl p-4 border border-white border-opacity-30">
                    {graphView === 'daily' && (
                      <>
                        <div className="text-2xl font-bold text-yellow-300 mb-1">ì´ë²ˆ ì£¼ ì´ ê±¸ìŒ ìˆ˜</div>
                        <div className="text-4xl font-black">{weeklySteps.reduce((sum, steps) => sum + steps, 0).toLocaleString()}ë³´</div>
                        <div className="text-sm text-purple-100 mt-2">í‰ê·  {Math.round(weeklySteps.reduce((sum, steps) => sum + steps, 0) / 7).toLocaleString()}ë³´/ì¼ ğŸ¯</div>
                      </>
                    )}
                    
                    {graphView === 'weekly' && (
                      <>
                        <div className="text-2xl font-bold text-yellow-300 mb-1">ìµœê·¼ 4ì£¼ ì´ ê±¸ìŒ ìˆ˜</div>
                        <div className="text-4xl font-black">{(weeklySteps.reduce((sum, steps) => sum + steps, 0) + 7500 + 8200 + 6800 + 7900 + 6500 + 7200 + 8500 + 8000 + 8700 + 7200 + 8100 + 6800 + 7500 + 8800 + 8500 + 9200 + 7800 + 8900 + 7600 + 8100 + 9500).toLocaleString()}ë³´</div>
                        <div className="text-sm text-purple-100 mt-2">ì£¼í‰ê·  {Math.round((weeklySteps.reduce((sum, steps) => sum + steps, 0) + 7500 + 8200 + 6800 + 7900 + 6500 + 7200 + 8500 + 8000 + 8700 + 7200 + 8100 + 6800 + 7500 + 8800 + 8500 + 9200 + 7800 + 8900 + 7600 + 8100 + 9500) / 28).toLocaleString()}ë³´/ì¼ ğŸ¯</div>
                      </>
                    )}
                    
                    {graphView === 'monthly' && (
                      <>
                        <div className="text-2xl font-bold text-yellow-300 mb-1">ìµœê·¼ 6ê°œì›” ì´ ê±¸ìŒ ìˆ˜</div>
                        <div className="text-4xl font-black">{(280000 + 265000 + 290000 + 275000 + 300000 + 285000).toLocaleString()}ë³´</div>
                        <div className="text-sm text-purple-100 mt-2">ì›”í‰ê·  {Math.round((280000 + 265000 + 290000 + 275000 + 300000 + 285000) / 6).toLocaleString()}ë³´/ì›” ğŸ¯</div>
                      </>
                    )}
                  </div>
                </div>
              </div>
            </div>

            {/* ìº˜ë¦°ë” ëª¨ë‹¬ */}
            {showCalendar && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                <div className="bg-white rounded-3xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                  {/* ìº˜ë¦°ë” í—¤ë” */}
                  <div className="flex items-center justify-between mb-6">
                    <h3 className="text-2xl font-bold text-gray-800">ğŸ“… ê±¸ìŒ ìˆ˜ ìƒì„¸ ìº˜ë¦°ë”</h3>
                    <button
                      onClick={() => setShowCalendar(false)}
                      className="text-2xl text-gray-500 hover:text-gray-700 transition-colors"
                    >
                      âœ•
                    </button>
                  </div>

                  {/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}
                  <div className="flex space-x-2 mb-6">
                    <button className="px-4 py-2 bg-blue-500 text-white rounded-lg font-medium">ì£¼ê°„ ìš”ì•½</button>
                    <button className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300">ì›”ê°„ ìº˜ë¦°ë”</button>
                    <button className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300">ìƒì„¸ í†µê³„</button>
                  </div>

                  {/* ì£¼ê°„ ìš”ì•½ */}
                  <div className="space-y-6">
                    {/* ì£¼ê°„ ê±¸ìŒ ìˆ˜ ì¹´ë“œë“¤ */}
                    <div className="grid grid-cols-7 gap-3 mb-6">
                      {['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'].map((day, index) => {
                        const steps = weeklySteps[index] ?? 0;
                        const isToday = index === mondayBasedTodayIndex;
                        const isGoalMet = steps >= 10000;
                        const goalPercentage = Math.min(100, (steps / 10000) * 100);
                        
                        return (
                          <div key={day} className={`text-center p-3 rounded-xl border-2 transition-all duration-300 ${
                            isToday 
                              ? 'border-yellow-400 bg-yellow-50 shadow-lg' 
                              : 'border-gray-200 bg-gray-50'
                          }`}>
                            <div className="text-sm font-bold text-gray-600 mb-2">{day}</div>
                            <div className={`rounded-lg p-3 mb-2 ${
                              isGoalMet 
                                ? 'bg-gradient-to-br from-green-500 to-emerald-500' 
                                : 'bg-gradient-to-br from-blue-500 to-cyan-500'
                            } text-white`}>
                              <div className="text-lg font-bold">{steps.toLocaleString()}</div>
                              <div className="text-xs opacity-90">ë³´</div>
                            </div>
                            
                            {/* ëª©í‘œ ë‹¬ì„± í‘œì‹œ */}
                            <div className="text-xs font-medium">
                              {isGoalMet && (
                                <span className="text-green-600">ğŸ¯ ë‹¬ì„±!</span>
                              )}
                            </div>
                            
                            {/* ì˜¤ëŠ˜ í‘œì‹œ */}
                            {isToday && (
                              <div className="mt-2 px-2 py-1 bg-yellow-400 text-black text-xs font-bold rounded-full">
                                ì˜¤ëŠ˜
                              </div>
                            )}
                          </div>
                        );
                      })}
                    </div>

                    {/* ì£¼ê°„ í†µê³„ ìš”ì•½ */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                      <div className="bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl p-4 text-white">
                        <div className="text-sm opacity-90 mb-1">ì´ë²ˆ ì£¼ ì´ ê±¸ìŒ ìˆ˜</div>
                        <div className="text-2xl font-bold">{weeklySteps.reduce((sum, steps) => sum + steps, 0).toLocaleString()}ë³´</div>
                        <div className="text-xs opacity-90 mt-1">
                          í‰ê·  {Math.round(weeklySteps.reduce((sum, steps) => sum + steps, 0) / 7).toLocaleString()}ë³´/ì¼
                        </div>
                      </div>
                      
                      <div className="bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-4 text-white">
                        <div className="text-sm opacity-90 mb-1">ëª©í‘œ ë‹¬ì„± ì¼ìˆ˜</div>
                        <div className="text-2xl font-bold">
                          {weeklySteps.filter(steps => steps >= 10000).length}/7ì¼
                        </div>
                        <div className="text-xs opacity-90 mt-1">
                          {Math.round((weeklySteps.filter(steps => steps >= 10000).length / 7) * 100)}% ë‹¬ì„±ë¥ 
                        </div>
                      </div>
                      
                      <div className="bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-4 text-white">
                        <div className="text-sm opacity-90 mb-1">ì£¼ê°„ íŠ¸ë Œë“œ</div>
                        <div className="text-2xl font-bold">
                          {weeklySteps[weeklySteps.length - 1] > weeklySteps[0] ? 'ğŸ“ˆ ìƒìŠ¹' : 'ğŸ“‰ í•˜ë½'}
                        </div>
                        <div className="text-xs opacity-90 mt-1">
                          {weeklySteps[weeklySteps.length - 1] > weeklySteps[0] 
                            ? `+${(weeklySteps[weeklySteps.length - 1] - weeklySteps[0]).toLocaleString()}ë³´`
                            : `${(weeklySteps[0] - weeklySteps[weeklySteps.length - 1]).toLocaleString()}ë³´ ê°ì†Œ`
                          }
                        </div>
                      </div>
                    </div>

                    {/* ìƒì„¸ í†µê³„ */}
                    <div className="space-y-4">
                      <h4 className="text-lg font-semibold text-gray-800 mb-3">ğŸ“Š ìƒì„¸ í†µê³„</h4>
                      
                      {/* ìµœê³  ê¸°ë¡ */}
                      <div className="mb-4">
                        <div className="bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl p-4 text-white">
                          <div className="text-sm opacity-90 mb-2">ğŸ† ìµœê³  ê¸°ë¡</div>
                          <div className="text-2xl font-bold mb-1">{Math.max(...weeklySteps).toLocaleString()}ë³´</div>
                          <div className="text-sm opacity-90">
                            {['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'][weeklySteps.indexOf(Math.max(...weeklySteps))]}ìš”ì¼ ë‹¬ì„±
                          </div>
                          <div className="text-xs opacity-90 mt-1">
                            ëª©í‘œ ëŒ€ë¹„ {Math.round((Math.max(...weeklySteps) / 10000) * 100)}% ë‹¬ì„±
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* ì£¼ê°„ íŠ¸ë Œë“œ ìƒì„¸ */}
                    <div className="bg-gray-100 rounded-xl p-4">
                        <h5 className="font-semibold text-gray-800 mb-3">ê±¸ìŒìˆ˜ ì§„í–‰ë¥ </h5>
                        
                        {/* ë¼ì¸ ê·¸ë˜í”„ */}
                        <div className="bg-white rounded-lg p-6 mb-4">
                          <div className="relative h-48">
                            {/* Chart.js ê·¸ë˜í”„ */}
                            <div style={{ width: '100%', height: '200px', position: 'relative' }}>
                              <canvas ref={chartCanvasRef} id="stepsChart" style={{ width: '100%', height: '100%' }}></canvas>
                            </div>
                          </div>
                          
                          {/* Xì¶• ë‚ ì§œ ë¼ë²¨ (ê·¸ë˜í”„ ì•„ë˜ìª½, ì—¬ë°± í™•ë³´) */}
                          <div className="flex justify-between mt-8 px-6">
                            {weeklySteps.map((steps, index) => {
                              const today = new Date();
                              const dayOffset = index - mondayBasedTodayIndex;
                              const date = new Date(today);
                              date.setDate(today.getDate() + dayOffset);
                              const month = date.getMonth() + 1;
                              const day = date.getDate();
                              
                              return (
                                <div key={index} className="text-center relative">
                                  {/* ë‚ ì§œ ìœ„ì¹˜ì— ì  í‘œì‹œ */}
                                  <div className="w-2 h-2 bg-gray-300 rounded-full mx-auto mb-2"></div>
                                  <div className="text-xs text-gray-600 font-medium">
                                    {month}/{day}
                                  </div>
                                </div>
                              );
                            })}
                          </div>
                        </div>
                        
                        {/* ìš”ì•½ í†µê³„ */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                          <div className="bg-white rounded-lg p-3 text-center">
                            <div className="text-sm text-gray-500 mb-1">ìµœê³  ê¸°ë¡</div>
                            <div className="text-lg font-bold text-green-600">
                              {Math.max(...weeklySteps).toLocaleString()}ë³´
                            </div>
                            <div className="text-xs text-gray-400">
                              {['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'][weeklySteps.indexOf(Math.max(...weeklySteps))]}ìš”ì¼
                            </div>
                          </div>
                          
                          <div className="bg-white rounded-lg p-3 text-center">
                            <div className="text-sm text-gray-500 mb-1">í‰ê· </div>
                            <div className="text-lg font-bold text-blue-600">
                              {Math.round(weeklySteps.reduce((sum, steps) => sum + steps, 0) / 7).toLocaleString()}ë³´
                            </div>
                            <div className="text-xs text-gray-400">ì¼í‰ê· </div>
                          </div>
                          
                          <div className="bg-white rounded-lg p-3 text-center">
                            <div className="text-sm text-gray-500 mb-1">ëª©í‘œ ë‹¬ì„±</div>
                            <div className="text-lg font-bold text-purple-600">
                              {weeklySteps.filter(steps => steps >= 10000).length}/7ì¼
                            </div>
                            <div className="text-xs text-gray-400">
                              {Math.round((weeklySteps.filter(steps => steps >= 10000).length / 7) * 100)}% ë‹¬ì„±
                            </div>
                          </div>
                        </div>
                        
                        {/* ê±¸ìŒìˆ˜ ë¶„ì„ */}
                        <div className="bg-white rounded-lg p-4">
                          <h6 className="font-semibold text-gray-800 mb-3">ğŸ“ˆ ê±¸ìŒìˆ˜ ë¶„ì„</h6>
                          <div className="space-y-2 text-sm">
                            {weeklySteps.map((steps, index) => {
                              const prevSteps = index > 0 ? weeklySteps[index - 1] : null;
                              const change = prevSteps ? steps - prevSteps : 0;
                              const changePercent = prevSteps ? Math.round((change / prevSteps) * 100) : 0;
                              const isToday = index === mondayBasedTodayIndex;
                              
                              return (
                                <div key={index} className={`flex items-center justify-between p-2 rounded ${
                                  isToday ? 'bg-yellow-50' : 'bg-gray-50'
                                }`}>
                                  <div className="flex items-center space-x-3">
                                    <span className={`font-medium ${isToday ? 'text-yellow-700' : 'text-gray-700'}`}>
                                      {['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'][index]}
                                      {isToday && <span className="ml-2 text-xs bg-yellow-400 text-black px-2 py-1 rounded-full">ì˜¤ëŠ˜</span>}
                                    </span>
                                    <span className="text-gray-600">{steps.toLocaleString()}ë³´</span>
                                  </div>
                                  
                                  {prevSteps && (
                                    <div className={`text-sm font-medium ${
                                      change > 0 ? 'text-green-600' : change < 0 ? 'text-red-600' : 'text-gray-500'
                                    }`}>
                                      {change > 0 ? 'â¬†ï¸' : change < 0 ? 'â¬‡ï¸' : 'â¡ï¸'} 
                                      {change > 0 ? '+' : ''}{change.toLocaleString()}ë³´
                                      <span className="ml-1">
                                        ({changePercent > 0 ? '+' : ''}{changePercent}%)
                                      </span>
                                    </div>
                                  )}
                                </div>
                              );
                            })}
                          </div>
                        </div>
                        
                        {/* ì£¼ê°„ ëª©í‘œ ë° ê¶Œì¥ì‚¬í•­ */}
                        <div className="bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl p-4 text-white">
                          <h5 className="font-semibold mb-3">ğŸ’¡ ì£¼ê°„ ëª©í‘œ ë° ê¶Œì¥ì‚¬í•­</h5>
                          <div className="space-y-2 text-sm">
                            <div className="flex items-center space-x-2">
                              <span>ğŸ¯</span>
                              <span>ì£¼ê°„ ëª©í‘œ: 70,000ë³´ (í•˜ë£¨ í‰ê·  10,000ë³´)</span>
                            </div>
                            <div className="flex items-center space-x-2">
                              <span>ğŸ“Š</span>
                              <span>í˜„ì¬ ì§„í–‰ë¥ : {Math.round((weeklySteps.reduce((sum, steps) => sum + steps, 0) / 70000) * 100)}%</span>
                            </div>
                            <div className="flex items-center space-x-2">
                              <span>â°</span>
                              <span>ë‚¨ì€ ê¸°ê°„: {7 - new Date().getDay()}ì¼</span>
                            </div>
                            <div className="flex items-center space-x-2">
                              <span>ğŸ’ª</span>
                              <span>ê¶Œì¥ì‚¬í•­: {weeklySteps.filter(steps => steps >= 10000).length < 4 ? 'ë” ë§ì€ ë‚ ì— ëª©í‘œë¥¼ ë‹¬ì„±í•´ë³´ì„¸ìš”!' : 'í›Œë¥­í•©ë‹ˆë‹¤! ê¾¸ì¤€í•¨ì„ ìœ ì§€í•˜ì„¸ìš”!'}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      )}

      {/* ë­í‚¹ íƒ­ */}
      {selectedTab === 'ranking' && (
        <div className="space-y-6">
          <div className="text-center mb-8">
            <h2 className="text-4xl font-black bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent mb-2">
              ğŸ† ê±¸ìŒìˆ˜ ë­í‚¹
            </h2>
            <p className="text-xl text-text-secondary">ë§¤ì¼ì˜ ë…¸ë ¥ì´ ë§Œë“¤ì–´ê°€ëŠ” ìˆœìœ„! ğŸ’ª</p>
          </div>

          {/* ë­í‚¹ ê¸°ê°„ ì„ íƒ */}
          <div className="flex justify-center space-x-4 mb-8">
            {['ì¼ê°„', 'ì£¼ê°„', 'ì›”ê°„'].map((period) => (
              <button
                key={period}
                className="px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold hover:from-purple-600 hover:to-pink-600 transition-all duration-300 transform hover:scale-105"
              >
                {period}
              </button>
            ))}
          </div>

          {/* ì¼ê°„ ë­í‚¹ */}
          <div className="bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl p-8 text-white">
            <h3 className="text-2xl font-bold mb-6 text-center">ğŸ“… ì˜¤ëŠ˜ì˜ ê±¸ìŒìˆ˜ ë­í‚¹</h3>
            <div className="space-y-4">
              {[
                { rank: 1, name: 'ğŸ”¥ ë¶ˆê½ƒëŸ¬ë„ˆ', steps: 15800, avatar: 'ğŸ”¥', level: 'ë§ˆìŠ¤í„°' },
                { rank: 2, name: 'ğŸ’¨ ë°”ëŒì˜ì†ë„', steps: 14200, avatar: 'ğŸ’¨', level: 'ì „ë¬¸ê°€' },
                { rank: 3, name: 'âš¡ ë²ˆê°œë§¨', steps: 13800, avatar: 'âš¡', level: 'ê³ ê¸‰ì' },
                { rank: 4, name: 'ğŸš€ ë¡œì¼“ê±¸ìŒ', steps: 12500, avatar: 'ğŸš€', level: 'ì¤‘ê¸‰ì' },
                { rank: 5, name: 'ğŸƒâ€â™‚ï¸ ë§ˆë¼í† ë„ˆ', steps: 11800, avatar: 'ğŸƒâ€â™‚ï¸', level: 'ì´ˆê¸‰ì' }
              ].map((user) => (
                <div key={user.rank} className="bg-white bg-opacity-15 backdrop-blur-sm rounded-2xl p-4 border border-white border-opacity-20">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-4">
                      <div className="text-3xl">{user.avatar}</div>
                      <div>
                        <div className="font-bold text-lg">{user.name}</div>
                        <div className="text-sm text-blue-100">{user.level}</div>
                      </div>
                    </div>
                    <div className="text-right">
                      <div className="text-2xl font-black text-yellow-300">{user.rank}</div>
                      <div className="text-sm text-blue-100">ìœ„</div>
                      <div className="text-lg font-bold">{user.steps.toLocaleString()}ë³´</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* ì£¼ê°„ ë­í‚¹ */}
          <div className="bg-gradient-to-br from-green-500 to-emerald-600 rounded-3xl p-8 text-white">
            <h3 className="text-2xl font-bold mb-6 text-center">ğŸ“Š ì´ë²ˆ ì£¼ ê±¸ìŒìˆ˜ ë­í‚¹</h3>
            <div className="space-y-4">
              {[
                { rank: 1, name: 'ğŸ”¥ ë¶ˆê½ƒëŸ¬ë„ˆ', steps: 125000, avatar: 'ğŸ”¥', level: 'ë§ˆìŠ¤í„°' },
                { rank: 2, name: 'ğŸ’¨ ë°”ëŒì˜ì†ë„', steps: 118000, avatar: 'ğŸ’¨', level: 'ì „ë¬¸ê°€' },
                { rank: 3, name: 'âš¡ ë²ˆê°œë§¨', steps: 112000, avatar: 'âš¡', level: 'ê³ ê¸‰ì' },
                { rank: 4, name: 'ğŸš€ ë¡œì¼“ê±¸ìŒ', steps: 108000, avatar: 'ğŸš€', level: 'ì¤‘ê¸‰ì' },
                { rank: 5, name: 'ğŸƒâ€â™‚ï¸ ë§ˆë¼í† ë„ˆ', steps: 105000, avatar: 'ğŸƒâ€â™‚ï¸', level: 'ì´ˆê¸‰ì' }
              ].map((user) => (
                <div key={user.rank} className="bg-white bg-opacity-15 backdrop-blur-sm rounded-2xl p-4 border border-white border-opacity-20">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-4">
                      <div className="text-3xl">{user.avatar}</div>
                      <div>
                        <div className="font-bold text-lg">{user.name}</div>
                        <div className="text-sm text-green-100">{user.level}</div>
                      </div>
                    </div>
                    <div className="text-right">
                      <div className="text-2xl font-black text-yellow-300">{user.rank}</div>
                      <div className="text-sm text-green-100">ìœ„</div>
                      <div className="text-lg font-bold">{user.steps.toLocaleString()}ë³´</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* ì›”ê°„ ë­í‚¹ */}
          <div className="bg-gradient-to-br from-orange-500 to-red-600 rounded-3xl p-8 text-white">
            <h3 className="text-2xl font-bold mb-6 text-center">ğŸ“ˆ ì´ë²ˆ ë‹¬ ê±¸ìŒìˆ˜ ë­í‚¹</h3>
            <div className="space-y-4">
              {[
                { rank: 1, name: 'ğŸ”¥ ë¶ˆê½ƒëŸ¬ë„ˆ', steps: 485000, avatar: 'ğŸ”¥', level: 'ë§ˆìŠ¤í„°' },
                { rank: 2, name: 'ğŸ’¨ ë°”ëŒì˜ì†ë„', steps: 452000, avatar: 'ğŸ’¨', level: 'ì „ë¬¸ê°€' },
                { rank: 3, name: 'âš¡ ë²ˆê°œë§¨', steps: 438000, avatar: 'âš¡', level: 'ê³ ê¸‰ì' },
                { rank: 4, name: 'ğŸš€ ë¡œì¼“ê±¸ìŒ', steps: 425000, avatar: 'ğŸš€', level: 'ì¤‘ê¸‰ì' },
                { rank: 5, name: 'ğŸƒâ€â™‚ï¸ ë§ˆë¼í† ë„ˆ', steps: 398000, avatar: 'ğŸƒâ€â™‚ï¸', level: 'ì´ˆê¸‰ì' }
              ].map((user) => (
                <div key={user.rank} className="bg-white bg-opacity-15 backdrop-blur-sm rounded-2xl p-4 border border-white border-opacity-20">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center space-x-4">
                      <div className="text-3xl">{user.avatar}</div>
              <div>
                        <div className="font-bold text-lg">{user.name}</div>
                        <div className="text-sm text-orange-100">{user.level}</div>
                      </div>
                    </div>
                    <div className="text-right">
                      <div className="text-2xl font-black text-yellow-300">{user.rank}</div>
                      <div className="text-sm text-orange-100">ìœ„</div>
                      <div className="text-lg font-bold">{user.steps.toLocaleString()}ë³´</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      )}

      {/* ì‹ ë°• ì±Œë¦°ì§€ íƒ­ */}
      {selectedTab === 'fun' && (
        <div className="space-y-6">
          <div className="text-center mb-8">
            <h2 className="text-4xl font-black bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent mb-2">
              ğŸª ì‹ ë°•í•œ ì±Œë¦°ì§€
            </h2>
            <p className="text-xl text-text-secondary">ì—‰ëš±í•˜ê³  ì¬ë¯¸ìˆëŠ” ë„ì „ìœ¼ë¡œ ìš´ë™ì„ ì¦ê²¨ë³´ì„¸ìš”! ğŸ­</p>
          </div>

          {/* ì‹ ë°• ì±Œë¦°ì§€ ì¹´í…Œê³ ë¦¬ */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            {/* ìŒì‹ ê´€ë ¨ ì±Œë¦°ì§€ */}
            <div className="bg-gradient-to-br from-pink-500 to-purple-600 rounded-3xl p-6 text-white">
              <h3 className="text-2xl font-bold mb-4 text-center">ğŸ• ìŒì‹ ì±Œë¦°ì§€</h3>
              <div className="space-y-4">
                <div className="bg-white bg-opacity-15 rounded-2xl p-4">
                  <h4 className="font-bold text-lg mb-2">ğŸ ì‚¬ê³¼ 1ê°œ ë¨¹ê³  1000ë³´ ê±·ê¸°</h4>
                  <p className="text-sm text-pink-100 mb-3">ì‚¬ê³¼ë¥¼ ë¨¹ì€ í›„ ë°”ë¡œ 1000ë³´ë¥¼ ê±¸ì–´ë³´ì„¸ìš”!</p>
                  <div className="flex justify-between items-center">
                    <span className="text-sm">ì°¸ì—¬ì: 234ëª…</span>
                    <button className="px-4 py-2 bg-yellow-400 text-black rounded-lg font-bold hover:bg-yellow-500 transition-colors">
                      ì°¸ì—¬í•˜ê¸°
                    </button>
                  </div>
                </div>
                <div className="bg-white bg-opacity-15 rounded-2xl p-4">
                  <h4 className="font-bold text-lg mb-2">â˜• ì»¤í”¼ ë§ˆì‹œê³  30ë¶„ ìš´ë™</h4>
                  <p className="text-sm text-pink-100 mb-3">ì¹´í˜ì¸ íš¨ê³¼ë¡œ ë” ê°•í•˜ê²Œ ìš´ë™í•´ë³´ì„¸ìš”!</p>
                  <div className="flex justify-between items-center">
                    <span className="text-sm">ì°¸ì—¬ì: 156ëª…</span>
                    <button className="px-4 py-2 bg-yellow-400 text-black rounded-lg font-bold hover:bg-yellow-500 transition-colors">
                      ì°¸ì—¬í•˜ê¸°
                    </button>
                  </div>
                </div>
              </div>
            </div>

            {/* ì¥ì†Œ ê´€ë ¨ ì±Œë¦°ì§€ */}
            <div className="bg-gradient-to-br from-blue-500 to-cyan-600 rounded-3xl p-6 text-white">
              <h3 className="text-2xl font-bold mb-4 text-center">ğŸ  ì¥ì†Œ ì±Œë¦°ì§€</h3>
              <div className="space-y-4">
                <div className="bg-white bg-opacity-15 rounded-2xl p-4">
                  <h4 className="font-bold text-lg mb-2">ğŸ¢ ì—˜ë¦¬ë² ì´í„° ëŒ€ì‹  ê³„ë‹¨ ì´ìš©</h4>
                  <p className="text-sm text-blue-100 mb-3">í•˜ë£¨ ì¢…ì¼ ê³„ë‹¨ë§Œ ì‚¬ìš©í•´ë³´ì„¸ìš”!</p>
                  <div className="flex justify-between items-center">
                    <span className="text-sm">ì°¸ì—¬ì: 89ëª…</span>
                    <button className="px-4 py-2 bg-cyan-400 text-black rounded-lg font-bold hover:bg-cyan-500 transition-colors">
                      ì°¸ì—¬í•˜ê¸°
                    </button>
                  </div>
                </div>
                <div className="bg-white bg-opacity-15 rounded-2xl p-4">
                  <h4 className="font-bold text-lg mb-2">ğŸš¶â€â™€ï¸ ì§‘ì—ì„œ ê°€ì¥ ë¨¼ ê³³ê¹Œì§€ ê±·ê¸°</h4>
                  <p className="text-sm text-blue-100 mb-3">ì§‘ ì•ˆì—ì„œ ê°€ì¥ ê¸´ ê²½ë¡œë¥¼ ì°¾ì•„ ê±¸ì–´ë³´ì„¸ìš”!</p>
                  <div className="flex justify-between items-center">
                    <span className="text-sm">ì°¸ì—¬ì: 67ëª…</span>
                    <button className="px-4 py-2 bg-cyan-400 text-black rounded-lg font-bold hover:bg-cyan-500 transition-colors">
                      ì°¸ì—¬í•˜ê¸°
                    </button>
                  </div>
                </div>
              </div>
            </div>

            {/* ì‹œê°„ ê´€ë ¨ ì±Œë¦°ì§€ */}
            <div className="bg-gradient-to-br from-green-500 to-emerald-600 rounded-3xl p-6 text-white md:col-span-2">
              <h3 className="text-2xl font-bold mb-4 text-center">â° ì‹œê°„ ì±Œë¦°ì§€</h3>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div className="bg-white bg-opacity-15 rounded-2xl p-4">
                  <h4 className="font-bold text-lg mb-2">ğŸŒ… ìƒˆë²½ 6ì‹œ ìš´ë™</h4>
                  <p className="text-sm text-green-100 mb-3">ì¼ì£¼ì¼ ì—°ì† ìƒˆë²½ ìš´ë™!</p>
                  <div className="flex justify-between items-center">
                    <span className="text-sm">ì°¸ì—¬ì: 45ëª…</span>
                    <button className="px-4 py-2 bg-emerald-400 text-black rounded-lg font-bold hover:bg-emerald-500 transition-colors">
                      ì°¸ì—¬í•˜ê¸°
                    </button>
                  </div>
                </div>
                <div className="bg-white bg-opacity-15 rounded-2xl p-4">
                  <h4 className="font-bold text-lg mb-2">ğŸŒ™ ë°¤ 11ì‹œ ì „ ì·¨ì¹¨</h4>
                  <p className="text-sm text-green-100 mb-3">ì¼ì£¼ì¼ ì—°ì† ì¼ì° ìê¸°!</p>
                  <div className="flex justify-between items-center">
                    <span className="text-sm">ì°¸ì—¬ì: 78ëª…</span>
                    <button className="px-4 py-2 bg-emerald-400 text-black rounded-lg font-bold hover:bg-emerald-500 transition-colors">
                      ì°¸ì—¬í•˜ê¸°
                    </button>
                  </div>
                </div>
                <div className="bg-white bg-opacity-15 rounded-2xl p-4">
                  <h4 className="font-bold text-lg mb-2">â±ï¸ 1ë¶„ í”Œë­í¬ ì±Œë¦°ì§€</h4>
                  <p className="text-sm text-green-100 mb-3">ë§¤ì¼ 1ë¶„ì”© í”Œë­í¬!</p>
                  <div className="flex justify-between items-center">
                    <span className="text-sm">ì°¸ì—¬ì: 123ëª…</span>
                    <button className="px-4 py-2 bg-emerald-400 text-black rounded-lg font-bold hover:bg-emerald-500 transition-colors">
                      ì°¸ì—¬í•˜ê¸°
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* íŒ€ ëŒ€ê²° íƒ­ */}
      {selectedTab === 'team' && (
        <div className="space-y-6">
          <div className="flex items-center justify-between">
            <h2 className="text-2xl font-bold text-text-primary">ğŸ‘¥ íŒ€ ëŒ€ê²°</h2>
            <div className="space-x-2">
              <button
                onClick={() => setShowCreateTeam(true)}
                className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm"
              >
                íŒ€ ë§Œë“¤ê¸°
              </button>
              <button
                onClick={() => setShowCreateMatch(true)}
                className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-sm"
              >
                ëŒ€ê²° ë§Œë“¤ê¸°
              </button>
            </div>
          </div>

          {/* íŒ€ ë­í‚¹ */}
          <div className="space-y-4">
            {teams.map((team) => (
              <div key={team.id} className="bg-background-secondary border border-border-primary rounded-lg p-6">
                <div className="flex items-center justify-between mb-4">
                  <div className="flex items-center space-x-3">
                    <div className="text-3xl">{team.rank === 1 ? 'ğŸ¥‡' : 'ğŸ¥ˆ'}</div>
                    <div>
                      <h3 className="text-xl font-semibold text-text-primary">{team.name}</h3>
                      <div className="text-sm text-text-secondary">
                        êµ¬ì„±ì› {team.members.length}ëª… (ìµœëŒ€ 10ëª…)
                      </div>
                    </div>
                  </div>
                  <div className="text-right">
                    <div className="text-2xl font-bold text-accent-yellow">{team.rank}ìœ„</div>
                    <div className="text-sm text-text-secondary">ì´ {team.totalSteps.toLocaleString()}ë³´</div>
                  </div>
                </div>
                
                {/* íŒ€ í†µê³„ */}
                <div className="grid grid-cols-2 gap-4">
                  <div className="bg-background-tertiary rounded-lg p-3 text-center">
                    <div className="text-lg font-semibold text-text-primary">{team.totalSteps.toLocaleString()}</div>
                    <div className="text-sm text-text-secondary">ì´ ê±¸ìŒ ìˆ˜</div>
                  </div>
                  <div className="bg-background-tertiary rounded-lg p-3 text-center">
                    <div className="text-lg font-semibold text-text-primary">{team.totalCalories}</div>
                    <div className="text-sm text-text-secondary">ì´ ì¹¼ë¡œë¦¬</div>
              </div>
            </div>
          </div>
        ))}
      </div>

          {/* ì§„í–‰ ì¤‘ì¸/ì˜ˆì •ëœ ëŒ€ê²° */}
          {matches.length > 0 && (
            <div className="bg-background-secondary border border-border-primary rounded-lg p-6">
              <h3 className="text-xl font-semibold text-text-primary mb-4">ğŸ ëŒ€ê²° í˜„í™©</h3>
              <div className="space-y-3">
                {matches.map(m => {
                  const teamA = teams.find(t => t.id === m.teamAId);
                  const teamB = teams.find(t => t.id === m.teamBId);
                  return (
                    <div key={m.id} className="flex items-center justify-between bg-background-tertiary rounded-lg p-3">
                      <div className="text-text-primary">
                        <span className="font-semibold">{teamA?.name}</span> vs <span className="font-semibold">{teamB?.name}</span>
                        <span className="ml-2 text-sm text-text-secondary">({m.status})</span>
                      </div>
                      <div className="text-sm text-text-secondary">
                        {m.startDate.toLocaleDateString()} ~ {m.endDate.toLocaleDateString()}
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          )}

          {/* íŒ€ ë§Œë“¤ê¸° ëª¨ë‹¬ */}
          {showCreateTeam && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl p-6 w-full max-w-lg">
                <div className="flex items-center justify-between mb-4">
                  <h3 className="text-xl font-semibold">ìƒˆë¡œìš´ íŒ€ ë§Œë“¤ê¸° (ìµœëŒ€ 10ëª…)</h3>
                  <button className="text-2xl" onClick={() => setShowCreateTeam(false)}>âœ•</button>
                </div>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium mb-1">íŒ€ ì´ë¦„</label>
                    <input value={newTeamName} onChange={e => setNewTeamName(e.target.value)} className="w-full px-3 py-2 border rounded-lg" placeholder="ì˜ˆ) ë²ˆê°œíŒ€" />
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-1">êµ¬ì„±ì› ì¶”ê°€ (ìµœëŒ€ 10ëª…)</label>
                    <div className="flex gap-2">
                      <input value={newMemberInput} onChange={e => setNewMemberInput(e.target.value)} className="flex-1 px-3 py-2 border rounded-lg" placeholder="ì´ë¦„ ì…ë ¥ í›„ ì¶”ê°€" />
                      <button onClick={handleAddMember} className="px-3 py-2 bg-accent-green text-white rounded-lg">ì¶”ê°€</button>
                    </div>
                    <div className="mt-2 flex flex-wrap gap-2">
                      {newTeamMembers.map(name => (
                        <span key={name} className="px-2 py-1 bg-gray-100 rounded-lg text-sm">
                          {name}
                          <button onClick={() => handleRemoveMember(name)} className="ml-1 text-gray-500 hover:text-gray-700">âœ•</button>
                        </span>
                      ))}
                    </div>
                    <div className="mt-1 text-xs text-gray-500">í˜„ì¬ {newTeamMembers.length}ëª… / ìµœëŒ€ 10ëª…</div>
                  </div>
                  <div className="flex justify-end gap-2">
                    <button onClick={() => setShowCreateTeam(false)} className="px-4 py-2 border rounded-lg">ì·¨ì†Œ</button>
                    <button onClick={handleCreateTeam} className="px-4 py-2 bg-accent-blue text-white rounded-lg">íŒ€ ìƒì„±</button>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* ëŒ€ê²° ë§Œë“¤ê¸° ëª¨ë‹¬ */}
          {showCreateMatch && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl p-6 w-full max-w-lg">
                <div className="flex items-center justify-between mb-4">
                  <h3 className="text-xl font-semibold">ëŒ€ê²° ë§Œë“¤ê¸° (ìµœëŒ€ 10ëª… vs 10ëª…)</h3>
                  <button className="text-2xl" onClick={() => setShowCreateMatch(false)}>âœ•</button>
                </div>
                <div className="space-y-4">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div>
                      <label className="block text-sm font-medium mb-1">íŒ€ A</label>
                      <select value={selectedTeamAId} onChange={e => setSelectedTeamAId(e.target.value)} className="w-full px-3 py-2 border rounded-lg">
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        {teams.map(t => (
                          <option key={t.id} value={t.id}>{t.name} ({t.members.length}ëª…)</option>
                        ))}
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">íŒ€ B</label>
                      <select value={selectedTeamBId} onChange={e => setSelectedTeamBId(e.target.value)} className="w-full px-3 py-2 border rounded-lg">
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        {teams.map(t => (
                          <option key={t.id} value={t.id}>{t.name} ({t.members.length}ëª…)</option>
                        ))}
                      </select>
                    </div>
                  </div>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div>
                      <label className="block text-sm font-medium mb-1">ì‹œì‘ì¼</label>
                      <input type="date" value={matchStartDate} onChange={e => setMatchStartDate(e.target.value)} className="w-full px-3 py-2 border rounded-lg" />
                    </div>
                    <div>
                      <label className="block text-sm font-medium mb-1">ì¢…ë£Œì¼</label>
                      <input type="date" value={matchEndDate} onChange={e => setMatchEndDate(e.target.value)} className="w-full px-3 py-2 border rounded-lg" />
                    </div>
                  </div>
                  <div className="flex justify-end gap-2">
                    <button onClick={() => setShowCreateMatch(false)} className="px-4 py-2 border rounded-lg">ì·¨ì†Œ</button>
                    <button onClick={handleCreateMatch} className="px-4 py-2 bg-accent-green text-white rounded-lg">ëŒ€ê²° ìƒì„±</button>
                  </div>
                </div>
              </div>
            </div>
          )}
      </div>
      )}
    </>
  );
};

export default WorkoutRecommendations;
